# Classi 学習記録自動入力ツール

Classi の学習記録を自動で入力するためのツールです。Web UI と Web API の両方をサポートしています。

## 機能

- Web UI による学習時間の入力
- Web API による学習時間の入力
- スクリーンショットによる入力確認
- 認証情報の Cookie 保存

## セットアップ

1. 必要なパッケージをインストール

```bash
npm install
```

2. 環境変数の設定

```env
MYBROWSER=your_browser_config
```

## 使用方法

### Web UI

1. ブラウザで `/` にアクセス
2. 初回アクセス時に認証情報を設定
3. フォームに学習時間とコメントを入力
4. 送信して完了

### Web API

#### 認証設定

最初に Web UI で認証情報を設定してください。(`/settings` にアクセス)

#### API エンドポイント

```
POST /api/submit
Content-Type: application/json
```

#### 対応教科一覧

以下の教科に対応しています：

- 国語
- 数学
- 英語
- 公民
- 地歴
- 化学
- 情報

#### リクエスト形式

```json
{
  "subjects": {
    "国語": 2,
    "数学": 3,
    "英語": 1,
    "公民": 0,
    "地歴": 1,
    "化学": 2,
    "情報": 1
  },
  "comment": "今日の学習メモ"
}
```

| フィールド        | 型           | 制限 | 説明                 |
| ----------------- | ------------ | ---- | -------------------- |
| subjects          | オブジェクト | 必須 | 各教科の学習時間     |
| subjects.{教科名} | 数値         | 0-7  | 学習時間（時間単位） |
| comment           | 文字列       | 任意 | 学習メモ             |

#### レスポンス形式

##### 成功時 (200 OK)

```json
{
  "success": true,
  "message": "学習記録の登録が完了しました",
  "screenshot": "base64_encoded_image"
}
```

##### 認証エラー (401 Unauthorized)

```json
{
  "error": "認証情報が設定されていません"
}
```

##### バリデーションエラー (400 Bad Request)

```json
{
  "error": "無効な教科名です: 物理"
}
```

または

```json
{
  "error": "無効な学習時間です: 8"
}
```

##### サーバーエラー (500 Internal Server Error)

```json
{
  "error": "エラーが発生しました",
  "message": "エラーの詳細メッセージ"
}
```

#### curl での実行例

```bash
curl -X POST "http://localhost:8787/api/submit" \
  -H "Content-Type: application/json" \
  -d '{
    "subjects": {
      "国語": 2,
      "数学": 3,
      "英語": 1,
      "公民": 0,
      "地歴": 1,
      "化学": 2,
      "情報": 1
    },
    "comment": "今日の学習メモ"
  }'
```

#### 注意事項

- すべての教科を含める必要はありません（未指定の教科は 0 時間として扱われます）
- 学習時間は 0 から 7 時間の間で指定してください
- コメントは省略可能です
- レスポンスには自動入力完了後のスクリーンショットが base64 エンコードされて含まれます

## 注意事項

- 認証情報は安全に管理してください
- API 使用時はレート制限に注意してください
- スクリーンショットには個人情報が含まれる可能性があります
